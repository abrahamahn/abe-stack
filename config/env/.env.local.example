# =============================================================================
# BSLT — .env.local (Optimized for Local Development)
# =============================================================================

# =============================================================================
# 1. Core Application
# =============================================================================
NODE_ENV=development
HOST=0.0.0.0
PORT=8080
API_PORT=8080
APP_PORT=5173
APP_BASE_URL=http://localhost:5173
API_BASE_URL=http://localhost:8080
APP_URL=http://localhost:5173
LOG_LEVEL=debug  # Optimized for local visibility
MAINTENANCE_MODE=false

# =============================================================================
# 2. Frontend (Vite)
# =============================================================================
VITE_API_URL=http://localhost:8080
VITE_APP_NAME=bslt-web

# =============================================================================
# 3. Provider Switches
# =============================================================================
DATABASE_PROVIDER=postgresql
STORAGE_PROVIDER=local
QUEUE_PROVIDER=local
CACHE_PROVIDER=local
SEARCH_PROVIDER=sql
EMAIL_PROVIDER=console
BILLING_PROVIDER=stripe
NOTIFICATIONS_PROVIDER=courier
AUTH_STRATEGIES=local,magic,kakao

# =============================================================================
# 4. Auth — Secrets & Tokens
# =============================================================================
JWT_SECRET=this_is_a_development_secret_that_is_long_enough_for_development_purposes
JWT_SECRET_PREVIOUS=
JWT_ISSUER=bslt
JWT_AUDIENCE=bslt-api
ACCESS_TOKEN_EXPIRY=15m
REFRESH_TOKEN_EXPIRY_DAYS=7
REFRESH_TOKEN_GRACE_PERIOD=30
COOKIE_SECRET=2jPf_x42yWXT1CWqvy-GApfhIiQy8dOVeH6IvQFIgWuf-2cwN65ktbFm5-_c6PgO

# =============================================================================
# 5. Auth — Password & Lockout
# =============================================================================
PASSWORD_MIN_LENGTH=8
PASSWORD_MAX_LENGTH=24
PASSWORD_MIN_SCORE=3
LOCKOUT_MAX_ATTEMPTS=10
LOCKOUT_DURATION_MS=1800000
MAGIC_LINK_EXPIRY_MINUTES=15
MAGIC_LINK_MAX_ATTEMPTS=3
TOTP_ISSUER=BSLT
TOTP_WINDOW=1

# =============================================================================
# 6. CORS / Proxy
# =============================================================================
CORS_ORIGIN=http://localhost:5173
TRUST_PROXY=false
TRUSTED_PROXIES=127.0.0.1
MAX_PROXY_DEPTH=1

# =============================================================================
# 7. Rate Limiting
# =============================================================================
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX=1000

# =============================================================================
# 8. Database (Local Postgres)
# =============================================================================
DATABASE_URL=postgresql://postgres:postgres@localhost:5433/bslt_dev
POSTGRES_CONNECTION_STRING=
POSTGRES_HOST=localhost
POSTGRES_PORT=5433
POSTGRES_DB=bslt_dev
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
DB_MAX_CONNECTIONS=10
DB_SSL=false

# =============================================================================
# 9. Cache / Redis
# =============================================================================
CACHE_USE_REDIS=false
CACHE_TTL_MS=300000
CACHE_MAX_SIZE=1000
REDIS_HOST=localhost
REDIS_PORT=6379

# =============================================================================
# 10. Queue
# =============================================================================
QUEUE_POLL_INTERVAL_MS=1000
QUEUE_CONCURRENCY=5
QUEUE_MAX_ATTEMPTS=3
QUEUE_BACKOFF_BASE_MS=1000
QUEUE_MAX_BACKOFF_MS=300000

# =============================================================================
# 11. Storage
# =============================================================================
STORAGE_ROOT_PATH=main/apps/server/uploads
STORAGE_PUBLIC_BASE_URL=http://localhost:8080/uploads

# =============================================================================
# 12. Email
# =============================================================================
EMAIL_FROM_NAME=BSLT (Local)
EMAIL_FROM_ADDRESS=noreply@example.com
EMAIL_REPLY_TO=noreply@example.com

# =============================================================================
# 13. Search
# =============================================================================
SQL_SEARCH_DEFAULT_PAGE_SIZE=50
SQL_SEARCH_MAX_PAGE_SIZE=1000
SQL_SEARCH_LOGGING=true  # Logging enabled for local search debugging

# =============================================================================
# 14. Billing
# =============================================================================
BILLING_CURRENCY=usd
BILLING_PORTAL_RETURN_URL=http://localhost:5173/settings/billing
BILLING_CHECKOUT_SUCCESS_URL=http://localhost:5173/billing/success
BILLING_CHECKOUT_CANCEL_URL=http://localhost:5173/pricing
PLAN_FREE_ID=plan_free
PLAN_PRO_ID=plan_pro
PLAN_ENTERPRISE_ID=plan_enterprise

# =============================================================================
# 15. Notifications (Test Credentials)
# =============================================================================

# =============================================================================
# 16. Package Manager
# =============================================================================
PACKAGE_MANAGER_PROVIDER=pnpm
NPM_AUDIT=true
NPM_LEGACY_PEER_DEPS=false
NPM_REGISTRY=https://registry.npmjs.org/
PNPM_STRICT_PEER_DEPS=true
PNPM_FROZEN_LOCKFILE=true
PNPM_REGISTRY=https://registry.npmjs.org/
YARN_AUDIT=true
YARN_FROZEN_LOCKFILE=true
YARN_REGISTRY=https://registry.npmjs.org/

APPLE_CALLBACK_URL=

APPLE_CLIENT_ID=

APPLE_CLIENT_SECRET=

APPLE_KEY_ID=

APPLE_PRIVATE_KEY=

APPLE_PRIVATE_KEY_BASE64=

APPLE_TEAM_ID=

AUDIT_RETENTION_DAYS=

AWS_SNS_ACCESS_KEY_ID=

AWS_SNS_REGION=

AWS_SNS_SECRET_ACCESS_KEY=

AWS_SNS_TOPIC_ARN=

BRAZE_API_KEY=

BRAZE_API_URL=

BRAZE_ENABLE_LOGGING=

CAPTCHA_ENABLED=

CAPTCHA_PROVIDER=

CAPTCHA_SECRET_KEY=

CAPTCHA_SITE_KEY=

CORS_ORIGINS=

COURIER_API_KEY=

COURIER_API_URL=

COURIER_ENABLE_LOGGING=

DATABASE_READ_REPLICA_URL=

ELASTICSEARCH_API_KEY=

ELASTICSEARCH_INDEX=

ELASTICSEARCH_NODE=

ELASTICSEARCH_PASSWORD=

ELASTICSEARCH_REQUEST_TIMEOUT_MS=

ELASTICSEARCH_TLS=

ELASTICSEARCH_USERNAME=

EMAIL_API_KEY=

FACEBOOK_CALLBACK_URL=

FACEBOOK_CLIENT_ID=

FACEBOOK_CLIENT_SECRET=

FCM_CREDENTIALS=

FCM_PROJECT_ID=

GITHUB_CALLBACK_URL=

GITHUB_CLIENT_ID=

GITHUB_CLIENT_SECRET=

KAKAO_CALLBACK_URL=

KAKAO_CLIENT_ID=

KAKAO_CLIENT_SECRET=

GOOGLE_CALLBACK_URL=

GOOGLE_CLIENT_ID=

GOOGLE_CLIENT_SECRET=

HEALTH_PORT=

JSON_DB_PATH=

JSON_DB_PERSIST_ON_WRITE=

KNOCK_API_URL=

KNOCK_ENABLE_LOGGING=

KNOCK_SECRET_KEY=

LOG_CLIENT_ERROR_LEVEL=

LOG_PRETTY_JSON=

LOG_REQUEST_CONTEXT=

MICROSOFT_CALLBACK_URL=

MICROSOFT_CLIENT_ID=

MICROSOFT_CLIENT_SECRET=

MICROSOFT_TENANT_ID=

MONGODB_CONNECTION_STRING=

MONGODB_CONNECT_TIMEOUT_MS=

MONGODB_DATABASE=

MONGODB_DB=

MONGODB_SOCKET_TIMEOUT_MS=

MONGODB_SSL=

MONGODB_USE_UNIFIED_TOPOLOGY=

NEXT_PUBLIC_APP_URL=

OAUTH_TOKEN_ENCRYPTION_KEY=

ONESIGNAL_APP_ID=

ONESIGNAL_ENABLE_LOGGING=

ONESIGNAL_REST_API_KEY=

ONESIGNAL_USER_AUTH_KEY=

PAYPAL_CLIENT_ID=

PAYPAL_CLIENT_SECRET=

PAYPAL_MODE=

PAYPAL_WEBHOOK_ID=

PUBLIC_API_URL=

PUBLIC_APP_URL=

RATE_LIMIT_FORGOT_PASSWORD_MAX=

RATE_LIMIT_LOGIN_MAX=

RATE_LIMIT_REGISTER_MAX=

RATE_LIMIT_VERIFY_EMAIL_MAX=

REDIS_DB=

REDIS_PASSWORD=

REQUIRED_VAR=

S3_ACCESS_KEY_ID=

S3_BUCKET=

S3_ENDPOINT=

S3_FORCE_PATH_STYLE=

S3_PRESIGN_EXPIRES_IN_SECONDS=

S3_REGION=

S3_SECRET_ACCESS_KEY=

SMTP_CONNECTION_TIMEOUT=

SMTP_HOST=

SMTP_PASS=

SMTP_PORT=

SMTP_SECURE=

SMTP_SOCKET_TIMEOUT=

SMTP_USER=

SQLITE_FILE_PATH=

SQLITE_FOREIGN_KEYS=

SQLITE_TIMEOUT_MS=

SQLITE_WAL_MODE=

SQL_SEARCH_MAX_CONDITIONS=

SQL_SEARCH_MAX_QUERY_DEPTH=

SQL_SEARCH_TIMEOUT_MS=

STRIPE_PUBLISHABLE_KEY=

STRIPE_SECRET_KEY=

STRIPE_WEBHOOK_SECRET=

VAPID_PRIVATE_KEY=

VAPID_PUBLIC_KEY=
