# =============================================================================
# ABE STACK - Environment Configuration Example
# =============================================================================
# Copy this file to .env.development or .env.production and update values
# Usage: docker-compose --env-file config/.env.development up

# =============================================================================
# DATABASE (PostgreSQL)
# =============================================================================
# Option 1: Full connection string (takes precedence)
# DATABASE_URL=postgres://user:password@localhost:5432/abe_stack_dev

# Option 2: Individual settings
POSTGRES_DB=abe_stack_dev
POSTGRES_USER=postgres
POSTGRES_PASSWORD=change_me_in_production
POSTGRES_PORT=5432
POSTGRES_HOST=localhost

# Connection pool settings (optional)
# DB_MAX_CONNECTIONS=10
# DB_IDLE_TIMEOUT=30000
# DB_CONNECT_TIMEOUT=10000

# =============================================================================
# REDIS (Cache, Sessions, Queues)
# =============================================================================
REDIS_PORT=6379
REDIS_HOST=localhost

# =============================================================================
# APPLICATION
# =============================================================================
NODE_ENV=development
APP_PORT=3000
API_PORT=8080

# =============================================================================
# SECURITY & AUTH
# =============================================================================
# Generate with: openssl rand -base64 32
JWT_SECRET=change_me_generate_random_secret

# Access token expiry (default: 15m)
# JWT_ACCESS_EXPIRY=15m

# Refresh token expiry in days (default: 7)
# REFRESH_TOKEN_EXPIRY_DAYS=7

# Refresh token grace period in seconds (default: 30)
# Allows token rotation retries within this window for network issues
# REFRESH_TOKEN_GRACE_PERIOD=30

# Account lockout settings
# LOCKOUT_MAX_ATTEMPTS=10
# LOCKOUT_DURATION_MS=1800000  # 30 minutes

# Password policy
# PASSWORD_MIN_LENGTH=8
# PASSWORD_MAX_LENGTH=64
# PASSWORD_MIN_SCORE=3  # zxcvbn score 0-4

# Proxy configuration for IP extraction (important for production behind load balancers)
# TRUST_PROXY=true  # Set to true if behind nginx, AWS ALB, etc.
# TRUSTED_PROXIES=10.0.0.0/8,172.16.0.0/12  # Comma-separated list of trusted proxy IPs/CIDRs
# MAX_PROXY_DEPTH=1  # Maximum number of proxies in x-forwarded-for chain

# =============================================================================
# STORAGE
# =============================================================================
# Provider: 'local' or 's3'
STORAGE_PROVIDER=local

# Local storage settings (when STORAGE_PROVIDER=local)
STORAGE_LOCAL_PATH=./uploads
STORAGE_LOCAL_PUBLIC_URL=http://localhost:8080/uploads

# S3 storage settings (when STORAGE_PROVIDER=s3)
# S3_BUCKET=my-bucket
# S3_REGION=us-east-1
# S3_ACCESS_KEY_ID=
# S3_SECRET_ACCESS_KEY=
# S3_ENDPOINT=                    # Optional: custom endpoint for MinIO
# S3_FORCE_PATH_STYLE=false       # Set true for MinIO
# S3_PRESIGN_EXPIRES_SECONDS=3600

# =============================================================================
# EXTERNAL SERVICES (Optional)
# =============================================================================
# AWS credentials (if different from S3 settings)
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=
# AWS_REGION=

# Payment processing
# STRIPE_SECRET_KEY=
# STRIPE_WEBHOOK_SECRET=

# Email service
# SENDGRID_API_KEY=
# EMAIL_FROM=noreply@example.com

# =============================================================================
# DEVELOPMENT TOOLS
# =============================================================================
# Enable debug logging
# DEBUG=true

# Drizzle Studio
# DRIZZLE_STUDIO_PORT=4983
