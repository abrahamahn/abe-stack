# Week 5 - 2026-W05 (Jan 27 - Feb 2)

## Sunday, January 26, 2026

### Lint Error Fixes & Configuration Alignment

**Objective**: Systematically fix ESLint errors across the codebase and ensure consistent strict type checking across all tools.

#### Configuration Investigation & Fixes
- **Consolidated TypeScript Configs**: Merged separate `tsconfig.lint.json` files into main `tsconfig.json` for all apps (`desktop`, `server`, `web`).
- **Unified References**: Updated `eslint.config.ts` and `vitest.config.ts` to rely on the single source of truth.
- **Result**: Simplified configuration architecture by removing redundant files.

#### Lint Error Resolution
- **Fixed ~35 Files**: Addressed nullish coalescing (`??`), nullable string checks (`strict-boolean-expressions`), and type-only exports across `apps/server` (config/infra).
- **Rule alignment**: Confirmed ESLint and TypeScript are both operating at maximum strictness, with VSCode settings updated to match.

---

## Tuesday, January 27, 2026

### Monorepo Tooling, Strictness & "Health Check"

**Objective**: Reach absolute maximum strictness, resolve OOM issues, and implement unified health reporting for the monorepo.

#### 1. Absolute Strictness & Configuration
- **TypeScript 5.7+**: Enabled `exactOptionalPropertyTypes` and `noPropertyAccessFromIndexSignature`.
- **ESLint Golden Standard**:
    - Enforced `naming-convention` (PascalCase types, camelCase logic).
    - **Fix**: Implemented regex filter in `eslint.config.ts` to allow `kebab-case` header properties without breaking the rule.
    - Enabled `import-x/no-cycle` and `no-deprecated` for long-term health.

#### 2. Tooling & Performance (The "Health Check" Era)
- **New Feature**: Created `pnpm health-check` utility.
    - **Parallel Execution**: Uses `turbo` to run lint and type-checks concurrently.
    - **Unified Reporting**: Aggregates output into a single dashboard with per-package error counts.
    - **Robustness**: Stripped ANSI codes to ensure accurate parsing of Turbo streams.
- **OOM Resolution**: Baked `--continue` into root scripts (`lint`, `type-check`) to use multiple processes and prevent heap crashes.
- **Clean Root**: Centralized all caches (`.eslintcache`, `.prettiercache`, `.turbo`) into `node_modules/.cache`.

#### 3. Test Environment Integration
- **Playwright**: Hooked up `.config/playwright.config.ts` to the custom monorepo environment loader (`packages/core/.../env.loader.ts`).
    - **Zero Dependencies**: Avoided adding `dotenv` by reusing the monorepo's existing logic.
    - **Consistency**: Ensures E2E tests run with the exact same environment variables as the application execution.

#### 4. Architecture Decisions
- **Database**: Validated `packages/db` structure.
    - **Decision**: Keep **Layer-Based** (`schema/`, `builder/`, `repositories/`) structure.
    - **Rationale**: Best for handling SQL's relational complexity and preventing circular dependencies between feature modules.
- **Hygiene**: Relocated `.editorconfig` to `.config/` and merged pnpm settings into `package.json`.

---

## Next Steps
1. Systematically fix extensions (`.js` imports) and surfaced errors across packages.
2. Finalize verification of the new parallel build pipeline.
