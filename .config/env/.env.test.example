# =============================================================================
# ABE STACK - .env.test
# =============================================================================

# =============================================================================
# Package Manager
# =============================================================================
PACKAGE_MANAGER_PROVIDER=pnpm
NPM_AUDIT=true
PNPM_STRICT_PEER_DEPS=true
PNPM_FROZEN_LOCKFILE=true

# =============================================================================
# Application
# =============================================================================
NODE_ENV=test
APP_PORT=3000
API_PORT=3001
APP_BASE_URL=http://localhost:3000
API_BASE_URL=http://localhost:3001
APP_URL=http://localhost:3000
HOST=127.0.0.1
PORT=3001
LOG_LEVEL=silent
MAINTENANCE_MODE=false

# =============================================================================
# Frontend (Vite)
# =============================================================================
VITE_API_URL=http://localhost:3001
VITE_APP_NAME=abe-stack-web-test

# =============================================================================
# CORS / Proxy
# =============================================================================
CORS_ORIGIN=http://localhost:3000
TRUST_PROXY=false
TRUSTED_PROXIES=127.0.0.1
MAX_PROXY_DEPTH=1

# =============================================================================
# Auth / Security
# =============================================================================
JWT_SECRET=this_is_a_test_secret_that_is_long_enough_for_testing_purposes
JWT_SECRET_PREVIOUS=
JWT_ISSUER=abe-stack-test
JWT_AUDIENCE=abe-stack-api-test
ACCESS_TOKEN_EXPIRY=5m
REFRESH_TOKEN_EXPIRY_DAYS=1
REFRESH_TOKEN_GRACE_PERIOD=0
COOKIE_SECRET=test_cookie_secret
SESSION_SECRET=test_session_secret
AUTH_BFF_MODE=false
PASSWORD_MIN_LENGTH=6
PASSWORD_MAX_LENGTH=128
PASSWORD_MIN_SCORE=1
LOCKOUT_MAX_ATTEMPTS=100
LOCKOUT_DURATION_MS=0
MAGIC_LINK_EXPIRY_MINUTES=5
MAGIC_LINK_MAX_ATTEMPTS=10
TOTP_ISSUER=ABE Stack Test
TOTP_WINDOW=1

# =============================================================================
# Rate Limiting
# =============================================================================
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX=10000
RATE_LIMIT_CLEANUP_INTERVAL_MS=60000
RATE_LIMIT_PROGRESSIVE_DELAY_ENABLED=false
RATE_LIMIT_BASE_DELAY_MS=0
RATE_LIMIT_MAX_DELAY_MS=0

# =============================================================================
# Provider Switches
# =============================================================================
DATABASE_PROVIDER=postgresql
STORAGE_PROVIDER=local
QUEUE_PROVIDER=local
SEARCH_PROVIDER=sql
EMAIL_PROVIDER=console
BILLING_PROVIDER=stripe
NOTIFICATIONS_PROVIDER=onesignal
CACHE_PROVIDER=local
AUTH_STRATEGIES=local

# =============================================================================
# Database
# =============================================================================
DATABASE_URL=postgresql://test:test@localhost:5432/test_db
POSTGRES_CONNECTION_STRING=
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=abe_stack_test
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
DB_MAX_CONNECTIONS=10
DB_SSL=false
JSON_DB_PATH=.data/test_db.json
JSON_DB_PERSIST_ON_WRITE=true

# =============================================================================
# Cache / Redis
# =============================================================================
CACHE_USE_REDIS=false
CACHE_TTL_MS=0
CACHE_MAX_SIZE=1000
REDIS_HOST=localhost
REDIS_PORT=6379

# =============================================================================
# Queue
# =============================================================================
QUEUE_POLL_INTERVAL_MS=100
QUEUE_CONCURRENCY=1
QUEUE_MAX_ATTEMPTS=1
QUEUE_BACKOFF_BASE_MS=0
QUEUE_MAX_BACKOFF_MS=0

# =============================================================================
# Storage
# =============================================================================
STORAGE_ROOT_PATH=.data/test_uploads
STORAGE_PUBLIC_BASE_URL=http://localhost:3001/test_uploads
S3_BUCKET=test-bucket
S3_REGION=us-east-1
S3_ACCESS_KEY_ID=test
S3_SECRET_ACCESS_KEY=test
S3_ENDPOINT=http://localhost:4566
S3_FORCE_PATH_STYLE=true
S3_PRESIGN_EXPIRES_IN_SECONDS=3600

# =============================================================================
# Email
# =============================================================================
EMAIL_API_KEY=test
EMAIL_FROM_NAME=ABE Stack Test
EMAIL_FROM_ADDRESS=noreply@test.com
EMAIL_REPLY_TO=noreply@test.com
SMTP_HOST=localhost
SMTP_PORT=1025
SMTP_SECURE=false
SMTP_USER=
SMTP_PASS=
SMTP_CONNECTION_TIMEOUT=1000
SMTP_SOCKET_TIMEOUT=1000

# =============================================================================
# OAuth Providers
# =============================================================================
GOOGLE_CLIENT_ID=test_client_id
GOOGLE_CLIENT_SECRET=test_client_secret
GOOGLE_CALLBACK_URL=http://localhost:3001/api/auth/oauth/google/callback
GITHUB_CLIENT_ID=test_client_id
GITHUB_CLIENT_SECRET=test_client_secret
GITHUB_CALLBACK_URL=http://localhost:3001/api/auth/oauth/github/callback
FACEBOOK_CLIENT_ID=test_client_id
FACEBOOK_CLIENT_SECRET=test_client_secret
FACEBOOK_CALLBACK_URL=http://localhost:3001/api/auth/oauth/facebook/callback
MICROSOFT_CLIENT_ID=test_client_id
MICROSOFT_CLIENT_SECRET=test_client_secret
MICROSOFT_CALLBACK_URL=http://localhost:3001/api/auth/oauth/microsoft/callback
MICROSOFT_TENANT_ID=common
APPLE_CLIENT_ID=test_client_id
APPLE_TEAM_ID=test_team_id
APPLE_KEY_ID=test_key_id
APPLE_PRIVATE_KEY=test_private_key
APPLE_PRIVATE_KEY_BASE64=
APPLE_CALLBACK_URL=http://localhost:3001/api/auth/oauth/apple/callback

# =============================================================================
# Notifications
# =============================================================================
ONESIGNAL_APP_ID=test_app_id
ONESIGNAL_REST_API_KEY=test_key
ONESIGNAL_USER_AUTH_KEY=test_user_key
ONESIGNAL_ENABLE_LOGGING=true

# =============================================================================
# Billing
# =============================================================================
BILLING_CURRENCY=usd
BILLING_PORTAL_RETURN_URL=http://localhost:3000/settings/billing
BILLING_CHECKOUT_SUCCESS_URL=http://localhost:3000/billing/success
BILLING_CHECKOUT_CANCEL_URL=http://localhost:3000/pricing
STRIPE_SECRET_KEY=sk_test_12345
STRIPE_PUBLISHABLE_KEY=pk_test_12345
STRIPE_WEBHOOK_SECRET=whsec_test_12345
PAYPAL_CLIENT_ID=test_client_id
PAYPAL_CLIENT_SECRET=test_client_secret
PAYPAL_MODE=sandbox
PAYPAL_WEBHOOK_ID=test_webhook_id
PLAN_FREE_ID=plan_free
PLAN_PRO_ID=plan_pro
PLAN_ENTERPRISE_ID=plan_enterprise

# =============================================================================
# Search
# =============================================================================
SQL_SEARCH_DEFAULT_PAGE_SIZE=50
SQL_SEARCH_MAX_PAGE_SIZE=1000
SQL_SEARCH_MAX_QUERY_DEPTH=5
SQL_SEARCH_MAX_CONDITIONS=20
SQL_SEARCH_LOGGING=false
SQL_SEARCH_TIMEOUT_MS=1000
